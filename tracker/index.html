{% extends 'base.html' %}

{% block content %}
<div class="main-grid">
    <div class="card">
        <h3><i class="fas fa-plus-circle"></i> Add Transaction</h3>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn-submit">Add Expense</button>
        </form>
    </div>

    <div class="card">
        <h3><i class="fas fa-layer-group"></i> Dashboard Overview</h3>
        
        <div class="summary-grid">
            <div class="summary-item st-total">
                <span>Total Balance</span>
                <strong>₱{{ total_expenses|default:"0.00" }}</strong>
            </div>
            <div class="summary-item st-today">
                <span>Today</span>
                <strong>₱{{ daily_expenses|default:"0.00" }}</strong>
            </div>
            <div class="summary-item st-high">
                <span>Peak Spend</span>
                <strong>₱{{ highest_expense|default:"0.00" }}</strong>
            </div>
        </div>

        <h3><i class="fas fa-history"></i> Recent Activity</h3>
        {% for expense in expenses %}
        <div class="expense-row">
            <div class="expense-info">
                <h4>{{ expense.description }}</h4>
                <p>{{ expense.category }} • {{ expense.date }}</p>
            </div>
            <div class="expense-amt">
                ₱{{ expense.amount }}
            </div>
        </div>
        {% empty %}
        <p style="text-align: center; color: var(--slate); padding: 2rem;">No transactions yet.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}